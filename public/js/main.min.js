var dataOdontograma={caries:[],restauracion:[]},dientes={},countClick=0,MyApp={eventoDientes:function(){$(".cont-diente .diente").on("click",function(a){if(!$(this).hasClass("active")){var t=$(this).parents(".svg");if(!(t.hasClass("active-ausente")||t.hasClass("active-erupcion")||t.hasClass("active-extruida")||t.hasClass("active-diastema"))){var s=$(".contenido-polygon").find(".svg");s.removeClass("pre-seleccionado"),s.not(".seleccionado").find(".diente").removeClass("active"),s.not(".seleccionado").removeClass("active-corona active-corona-malo");var l=$(this).parents(".contenido-odontograma"),o=(l.attr("data-id"),parseInt(l.attr("data-tipo"))),e=l.attr("data-name"),i=(l.attr("data-texto"),$(this).attr("data-pos")),n=$(this).attr("data-sigla"),r=$(this).parents("svg").attr("id"),p=$(this).parents("svg").attr("data-pieza"),d=$(this).parents(".box-lista-dientes").siblings().find(".box");if($(this).toggleClass("active"),$(this).toggleClass(e),$(".cont-diente .diente").removeClass("active-last"),$(this).addClass("active-last"),$(this).parents("svg").addClass("pre-seleccionado"),$(".select-tipo").remove(),$(l).hasClass(listaHallazgo.hallazgoDienteAusente)&&$(this).parents("svg").toggleClass("active-ausente"),$(l).hasClass(listaHallazgo.hallazgoDienteErupcion)&&$(this).parents("svg").toggleClass("active-erupcion"),$(l).hasClass(listaHallazgo.hallazgoDienteExtruida)){$(this).parents("svg").toggleClass("active-extruida");var c='<img src="img/flecha-extruida.png">';$(this).parents(".cont-diente").addClass("flecha-extruida"),$(this).parents(".cont-diente").append(c)}if($(l).hasClass(listaHallazgo.hallazgoDienteIntruida)){$(this).parents("svg").toggleClass("active-intruida");c='<img src="img/flecha-intruida.png">';$(this).parents(".cont-diente").addClass("flecha-intruida"),$(this).parents(".cont-diente").append(c)}if($(l).hasClass(listaHallazgo.hallazgoDiastema)){$(this).parents("svg").toggleClass("active-diastema");c='<img src="img/diastema.png">';$(this).parents(".cont-diente").addClass("diastema"),$(this).parents(".cont-diente").append(c)}if($(l).hasClass(listaHallazgo.hallazgoGiroversion)){$(this).parents("svg").toggleClass("active-giroversion");c='<img src="img/giroversion.png">';$(this).parents(".cont-diente").addClass("giroversion"),$(this).parents(".cont-diente").append(c)}if(($(l).hasClass(listaHallazgo.hallazgoImplanteDental)||$(l).hasClass(listaHallazgo.hallazgoImplanteDentalMalo))&&($(this).parents("svg").addClass("seleccionado"),$(this).parents("svg").removeClass("pre-seleccionado")),$(l).hasClass(listaHallazgo.hallazgoCorona)&&$(this).parents("svg").toggleClass("active-corona"),$(l).hasClass(listaHallazgo.hallazgoCoronaMalo)&&$(this).parents("svg").toggleClass("active-corona-malo"),$(l).hasClass(listaHallazgo.hallazgoCoronaTemporal)&&$(this).parents("svg").toggleClass("active-corona-temporal"),$(l).hasClass(listaHallazgo.hallazgoGeminacion)&&$(this).parents("svg").parent().toggleClass("active-geminacion"),$(l).hasClass(listaHallazgo.hallazgFusion)&&$(this).parents("svg").parent().toggleClass("active-fusion"),$(l).hasClass(listaHallazgo.hallazgoDienteClavija)&&$(this).parents("svg").parent().toggleClass("active-clavija"),$(l).hasClass(listaHallazgo.hallazgoEdentuloTotal)&&$(this).parents("svg").parent().toggleClass("active-edentulo-total"),$(l).hasClass(listaHallazgo.hallazgoSupernumeraria)&&$(this).parents("svg").parent().toggleClass("active-supernumeraria"),$(l).hasClass(listaHallazgo.hallazgoProtesisTotal)&&$(this).parents("svg").parent().toggleClass("active-protesis-total"),$(l).hasClass(listaHallazgo.hallazgoProtesisTotalMalo)&&$(this).parents("svg").parent().toggleClass("active-protesis-total-malo"),$(l).hasClass(listaHallazgo.hallazgoOrtodonticoRemovible)&&$(this).parents("svg").parent().toggleClass("active-ortodontico-removible"),$(l).hasClass(listaHallazgo.hallazgoOrtodonticoRemovibleMalo)&&$(this).parents("svg").parent().toggleClass("active-ortodontico-removible-malo"),countClick++,$(l).hasClass(listaHallazgo.hallazgoProtesisFija)&&("1"==countClick?$(this).parents("svg").parent().toggleClass("puente1"):"2"==countClick&&(countClick=0,$(this).parents("svg").parent().toggleClass("puente2"),$(this).parents("svg").parent().addClass("seleccionado"),$(this).parents("svg").parent().parent().find(".puente1").addClass("seleccionado"))),$(d).each(function(a){if(this.id==r){if(e==listaHallazgo.hallazgoCaries){var t="<select class='select-tipo select-caries' name='hallazgo-caries'><option value=''>Elegir</option><option value='Mancha Blanca'>MB</option> <option value='Caries del esmalte'>CE</option> <option value='Caries de la dentina'>CD</option> <option value='Caries de la pulpa'>CDP</option></select>";$(this).find(".select-hallazgos").append(t)}if(e==listaHallazgo.hallazgoDefectosDelEsmalte){t="<select class='select-tipo select-defectos-esmalte' name='hallazgo-defectos-del-esmalte'><option value=''>Elegir</option><option value='Hipoplasia'>HP</option> <option value='Hipo Mineralización' >HM</option> <option value='Opacidades de Esmalte'>O</option> <option value='Decoloración del Esmalte'>D</option><option value='Fluorosis'>Fluorosis</option></select>";$(this).find(".select-hallazgos").append(t)}if(e==listaHallazgo.hallazgoRestauracionDefinitiva){t="<select class='select-tipo select-restauracion-definitiva' name='hallazgo-restauracion-definitiva'><option value=''>Elegir</option><option value='Amalgama Dental'>AD</option> <option value='Resina' >R</option> <option value='Ionónedo de vidrio'>IV</option><option value='Incrustación Estética'>IE</option><option value='Canilla Estética'>C</option></select>";$(this).find(".select-hallazgos").append(t)}if(e==listaHallazgo.hallazgoRestauracionDefinitivaMalo){t="<select class='select-tipo select-restauracion-definitiva-malo' name='hallazgo-restauracion-definitiva-malo'><option value=''>Elegir</option><option value='Amalgama Dental'>AD</option> <option value='Resina' >R</option> <option value='Ionónedo de vidrio'>IV</option><option value='Incrustación Estética'>IE</option><option value='Canilla Estética'>C</option></select>";$(this).find(".select-hallazgos").append(t)}if(e==listaHallazgo.hallazgoPosicionDentaria){t="<select class='select-tipo select-posicion-dentari' name='hallazgo-posicion-dentaria'><option value=''>Elegir</option><option value='Mesializado'>M</option> <option value='Distalizado'>D</option> <option value='Vestibularizado'>V</option><option value='Palatinizado'>P</option><option value='Lingualizado'>L</option></select>";$(this).find(".select-hallazgos").append(t)}if(e==listaHallazgo.hallazgoMovilidadPatologica){t="<select class='select-tipo select-movilidad-patologica' name='hallazgo-movilidad-patologica'><option value=''>Elegir</option><option value='M1'>M1</option> <option value='M2'>M2</option> <option value='M3'>M3</option> </select>";$(this).find(".select-hallazgos").append(t)}if(e==listaHallazgo.hallazgoCorona){t="<select class='select-tipo select-corona' name='hallazgo-corona'><option value=''>Elegir</option><option value='Corona Metálica'>CM</option><option value='Corona Fenestrada'>CF</option><option value='Corona Metal Cerámica'>CMC</option><option value='Corona Veneer'>CV</option><option value='Canilla Estética'>CJ</option><option value='Corona Temporal'>CT</option> </select>";$(this).find(".select-hallazgos").append(t)}if(e==listaHallazgo.hallazgoCoronaMalo){t="<select class='select-tipo select-corona-malo' name='hallazgo-corona-malo'><option value=''>Elegir</option><option value='Corona Metálica'>CM</option><option value='Corona Fenestrada'>CF</option><option value='Corona Metal Cerámica'>CMC</option><option value='Corona Veneer'>CV</option><option value='Canilla Estética'>CJ</option><option value='Corona Temporal'>CT</option> </select>";$(this).find(".select-hallazgos").append(t)}e==listaHallazgo.hallazgoImplanteDental&&$(this).find(".select-hallazgos").append('<span class="hallazgo-implante-dental">IMP</span>'),e==listaHallazgo.hallazgoImplanteDentalMalo&&$(this).find(".select-hallazgos").append('<span class="hallazgo-implante-dental-malo">IMP</span>'),e==listaHallazgo.hallazgoFosasyFisurasProfundas&&$(this).find(".select-hallazgos").append('<span class="hallazgo-fosas-fisuras-profundas">FFP</span>'),e==listaHallazgo.hallazgoPiesaDentariaEctopica&&$(this).find(".select-hallazgos").append('<span class="hallazgo-piesa-dentaria-ectopica">E</span>'),e==listaHallazgo.hallazgoMacrodoncia&&$(this).find(".select-hallazgos").append('<span class="hallazgo-macrodoncia">MAC</span>'),e==listaHallazgo.hallazgoMicrodoncia&&$(this).find(".select-hallazgos").append('<span class="hallazgo-microdoncia">MIC<span>'),e==listaHallazgo.hallazgoImpactacion&&$(this).find(".select-hallazgos").append('<span class="hallazgo-impactacion">I</span>'),e==listaHallazgo.hallazgoRemanenteRadicular&&$(this).find(".select-hallazgos").append('<span class="hallazgo-remanente-radicular">RR</span>'),e==listaHallazgo.hallazgoCoronaTemporal&&$(this).find(".select-hallazgos").append('<span class="hallazgo-corona-temporal">CT</span>')}}),$(l).is('[data-tipo~="3"]')){r=$(this).parents("svg").attr("id"),p=$(this).parents("svg").attr("data-pieza"),e=$(this).parents(".contenido-odontograma").attr("data-texto");$(".lista-hallazgo-detallado").append("<li id="+r+" data-pos="+i+" data-sigla="+n+"  data-hallazgo="+o+'><span class="nombre-hallazo"> '+e+" : </span>  En la cara "+i+" <span>  "+n+" </span>, de la  pieza dental <span> "+p+'</span>  <a href="#">Eliminar</a>  </li>'),$(this).parents("svg").addClass("seleccionado"),$(this).parents("svg").removeClass("pre-seleccionado")}else if($(l).is('[data-tipo~="5"]')){r=$(this).parents("svg").attr("id"),p=$(this).parents("svg").attr("data-pieza"),e=$(this).parents(".contenido-odontograma").attr("data-texto");$(".lista-hallazgo-detallado").append("<li id="+r+" data-pos="+i+" data-sigla="+n+"  data-hallazgo="+o+'><span class="nombre-hallazo"> '+e+" </span>: En la  pieza dental <span> "+p+'</span> <a href="#">Eliminar</a>  </li>'),$(this).parents("svg").addClass("seleccionado"),$(this).parents("svg").removeClass("pre-seleccionado")}else if($(l).is('[data-tipo~="6"]')){r=$(this).parents("svg").attr("id"),p=$(this).parents("svg").attr("data-pieza"),e=$(this).parents(".contenido-odontograma").attr("data-texto");$(".lista-hallazgo-detallado").append("<li id="+r+" data-pos="+i+" data-sigla="+n+' ><span class="nombre-hallazo"> '+e+" : </span> De la  pieza dental <span> "+p+'</span> <a href="#">Eliminar</a>  </li>'),$(this).parents("svg").addClass("seleccionado"),$(this).parents("svg").removeClass("pre-seleccionado")}else if($(l).is('[data-tipo~="7"]')){r=$(this).parents("svg").attr("id"),p=$(this).parents("svg").attr("data-pieza"),e=$(this).parents(".contenido-odontograma").attr("data-texto");$(".lista-hallazgo-detallado").append("<li id="+r+" data-pos="+i+" data-sigla="+n+' ><span class="nombre-hallazo"> '+e+" : </span> Entre la  pieza dental <span> "+p+'</span> <a href="#">Eliminar</a>  </li>'),$(this).parents("svg").addClass("seleccionado"),$(this).parents("svg").removeClass("pre-seleccionado")}else if($(l).is('[data-tipo~="8"]')){r=$(this).parents("svg").attr("id");var g=$(this).parents(".box-lista-dientes").parent().attr("data-edentulo");p=$(this).parents("svg").attr("data-pieza"),e=$(this).parents(".contenido-odontograma").attr("data-texto");$(".lista-hallazgo-detallado").append("<li id="+r+" data-pos="+i+" data-sigla="+n+' ><span class="nombre-hallazo"> '+e+" : </span> <span> "+g+'</span> <a href="#">Eliminar</a>  </li>'),$(this).parents("svg").addClass("seleccionado"),$(this).parents("svg").removeClass("pre-seleccionado")}else if($(l).is('[data-tipo~="9"]')){r=$(this).parents("svg").attr("id"),p=$(this).parents("svg").attr("data-pieza"),e=$(this).parents(".contenido-odontograma").attr("data-texto");$(".lista-hallazgo-detallado").append("<li id="+r+" data-pos="+i+" data-sigla="+n+"  data-hallazgo="+o+'><span class="nombre-hallazo"> '+e+" : </span>   "+n+" </span>, Entre la  pieza dental <span> "+p+'</span> y <span> 4.5 </span> <a href="#">Eliminar</a>  </li>')}$(".select-tipo").change(function(){var o=$(this).children("option:selected").text(),e=$(this).children("option:selected").val(),i=$(this).parents(".box").attr("data-pieza"),n=($(this).parents(".box").attr("data-pieza"),$(this).parents(".box").attr("id")),a=$(this).parents(".contenido-odontograma"),r=a.attr("data-texto"),p=parseInt(a.attr("data-tipo")),t=a.attr("data-name");"Elegir"!==o&&$(this).parent().append("<span  class="+t+">"+o+"</span> ");var s=$(this).parents(".box-options").siblings().find(".svg");$(s).each(function(a){var t=this.id;if(n==t){var s=$(this).find(".active-last").attr("data-pos"),l=$(this).find(".active-last").attr("data-sigla");p===listaPintado.tipoPintado4||p===listaPintado.tipoPintado5?$(".lista-hallazgo-detallado").append("<li id="+n+" data-pos="+s+" data-sigla="+o+"  data-hallazgo="+p+'><span class="nombre-hallazo"> '+r+"</span> : "+e+" <span>"+o+" </span>, de la  pieza dental <span> "+i+'</span> <a href="#">Eliminar</a> </li> '):$(".lista-hallazgo-detallado").append("<li id="+n+" data-pos="+s+" data-sigla="+o+" data-hallazgo="+p+'><span class="nombre-hallazo"> '+r+"</span> : "+e+" <span>"+o+" </span>,  en la cara "+s+" <span>  "+l+" </span>, de la  pieza dental <span> "+i+'</span> <a href="#">Eliminar</a> </li> '),$(this).addClass("seleccionado"),$(this).removeClass("pre-seleccionado"),i in dientes?r in dientes[i]&&(dientes[i][r][s]=!0):(dientes[i]={},r in dientes[i]||(dientes[i][r]={},dientes[i][r][s]=!0)),$("#id_odontograma_especificaciones").html(JSON.stringify(dientes))}}),$(this).remove()})}}})},eventJson:function(){JSON.parse('{ "nombre": "caries","pieza": "1.1" , "cara": "mesial",  "tipo" : "mancha blanca"}')},activarHallazgo:function(){$(".lista-hallazgos li a, .estados a").on("click",function(a){a.preventDefault(),a.stopPropagation(),nombreHallazgo=$(this).attr("id"),textoHallazgo=$(this).attr("data-texto"),tipoHallazgo=$(this).attr("data-tipo"),idHallazgo=$(this).attr("data-id"),$(".lista-hallazgos li a").removeClass("active"),$(this).addClass("active");var t=$(this).parents(".page-odontograma").find(".contenido-odontograma");t.attr("data-texto",textoHallazgo),t.attr("data-name",nombreHallazgo),t.attr("data-tipo",tipoHallazgo),t.attr("data-id",idHallazgo),t.removeClass(),t.addClass("contenido-odontograma"),t.addClass(nombreHallazgo),nombreHallazgo==listaHallazgo.hallazgoRestauracionDefinitiva||nombreHallazgo==listaHallazgo.hallazgoRestauracionDefinitivaMalo?$(".restaura-estado").addClass("show"):$(".restaura-estado").removeClass("show"),$("#hallazgo-restauracion-definitiva-malo").toggleClass(".actiive"),nombreHallazgo==listaHallazgo.hallazgoImplanteDental||nombreHallazgo==listaHallazgo.hallazgoImplanteDentalMalo?$(".implante-estado").addClass("show"):$(".implante-estado").removeClass("show"),$("#hallazgo-implante-dental-malo").toggleClass(".actiive"),nombreHallazgo==listaHallazgo.hallazgoCorona||nombreHallazgo==listaHallazgo.hallazgoCoronaMalo?$(".corona-estado").addClass("show"):$(".corona-estado").removeClass("show"),$("#hallazgo-corona-malo").toggleClass(".actiive"),nombreHallazgo==listaHallazgo.hallazgoEdentuloTotal?(alert("Selecinonar la pieza dentaria inicial"),$(".svg").addClass("disabledbutton"),$(".row-dientes .cont-diente:first-child svg").removeClass("disabledbutton")):$(".svg").removeClass("disabledbutton"),nombreHallazgo==listaHallazgo.hallazgoProtesisTotal||nombreHallazgo==listaHallazgo.hallazgoProtesisTotalMalo?(alert("Selecinonar la pieza dentaria inicial"),$(".svg").addClass("disabledbutton"),$(".row-dientes .cont-diente:first-child svg").removeClass("disabledbutton"),$(".protesis-estado").addClass("show")):$(".protesis-estado").removeClass("show"),$("#hallazgo-protesis-total-malo").toggleClass(".actiive"),nombreHallazgo==listaHallazgo.hallazgoOrtodonticoRemovible||nombreHallazgo==listaHallazgo.hallazgoOrtodonticoRemovibleMalo?(alert("Selecinonar la pieza dentaria inicial"),$(".svg").addClass("disabledbutton"),$(".row-dientes .cont-diente:first-child svg").removeClass("disabledbutton"),$(".ortodontico-estado").addClass("show")):$(".ortodontico-estado").removeClass("show"),$("#hallazgo-protesis-total-malo").toggleClass(".actiive")}),$(".restaura-estado .bueno").click(function(a){$("#hallazgo-restauracion-definitiva").trigger("click")}),$(".restaura-estado .malo").click(function(a){$("#hallazgo-restauracion-definitiva").toggleClass("active")}),$(".implante-estado .bueno").click(function(a){$("#hallazgo-implante-dental").trigger("click")}),$(".implante-estado .malo").click(function(a){$("#hallazgo-implante-dental").toggleClass("active")}),$(".corona-estado .bueno").click(function(a){$("#hallazgo-corona").trigger("click")}),$(".corona-estado .malo").click(function(a){$("#hallazgo-corona").toggleClass("active")}),$(".protesis-estado .bueno").click(function(a){$("#hallazgo-protesis-total").trigger("click")}),$(".protesis-estado .malo").click(function(a){$("#hallazgo-protesis-total-malo").toggleClass("active")}),$("#hallazgo-caries").click()},eliminarHallazgos:function(){$(document).on("click",".lista-hallazgo-detallado li a",function(a){a.preventDefault(),a.stopPropagation();var s=$(this).parents("li").attr("id"),l=$(this).parents("li").attr("data-pos"),o=$(this).parents("li").attr("data-sigla"),e=parseInt($(this).parents("li").attr("data-hallazgo")),t=$(this).parents(".page-odontograma").find(".svg");$(t).each(function(a){if(this.id==s){var t=$(this).find(".diente");$(t).each(function(a){var t=$(this).attr("data-pos");$(this).attr("data-sigla");l==t&&($(this).removeClass("active"),$(this).parents(".svg").removeClass("seleccionado"),$(this).parents(".svg").removeClass("active-ausente"),$(this).parents(".svg").removeClass("active-erupcion"),$(this).parents(".svg").removeClass("active-corona"),$(this).parents(".svg").removeClass("active-corona-malo"),$(this).parents(".svg").removeClass("active-corona-temporal"),$(this).parents(".svg").parent().removeClass("active-geminacion"),$(this).parents(".svg").parent().removeClass("active-fusion"),$(this).parents(".svg").parent().removeClass("active-clavija"),$(this).parents(".svg").parent().removeClass("active-edentulo-total"),$(this).parents(".svg").parent().removeClass("active-supernumeraria"),$(this).parents(".svg").parent().removeClass("active-protesis-total"),$(this).parents(".svg").parent().removeClass("active-protesis-total-malo"),$(this).parents(".svg").parent().removeClass("active-ortodontico-removible"),$(this).parents(".svg").parent().removeClass("active-ortodontico-removible-malo"),$(this).parents(".flecha-extruida").find("img").remove(),$(this).parents(".flecha-intruida").find("img").remove(),$(this).parents(".diastema").find("img").remove(),$(this).parents(".giroversion").find("img").remove())})}});$(this).parents("li").find(".nombre-hallazo").text().trim();var i=$(this).parents(".page-odontograma").find(".box");$(i).each(function(a){if(this.id==s){var t=$(this).find(".select-hallazgos").find("span");e==listaPintado.tipoPintado5?t.remove():$(t).each(function(a){$(this).text()==o&&$(this).remove()})}}),$(this).parents("li").remove()})}};$(function(){$(".page-odontograma").length&&(MyApp.eventoDientes(),MyApp.eventJson(),MyApp.activarHallazgo(),MyApp.eliminarHallazgos())});