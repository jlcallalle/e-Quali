var dataOdontograma={caries:[],restauracion:[]},dientes={},MyApp={eventoDientes:function(){$(".cont-diente .diente").on("click",function(a){$(".cont-diente .diente").removeClass("active-last"),$(this).addClass("active-last");var t=$(this).attr("data-pos"),e=$(this).attr("data-sigla");$(".opciones-odontologia p").removeClass("show");var o=$(this).parents("svg").attr("id"),i=$(this).parents(".box-lista-dientes").siblings().find(".box"),s=$(this).parents(".contenido-odontograma"),n=s.attr("data-name");if(console.log(n),$(this).toggleClass("active"),$(this).toggleClass(n),$(i).each(function(a){if(this.id==o){if("hallazgo-caries"==n){var t="<select class='select-tipo select-caries' name='hallazgo-caries'><option value=''>Elegir</option><option value='Mancha Blanca'>MB</option> <option value='Caries del esmalte'>CE</option> <option value='Caries de la dentina'>CD</option> <option value='Caries de la pulpa'>CDP</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-defectos-esmalte"==n){t="<select class='select-tipo select-defectos-esmalte' name='hallazgo-defectos-esmalte'><option value=''>Elegir</option><option value='Hipoplasia'>HP</option> <option value='Hipo Mineralización' >HM</option> <option value='Opacidades de Esmalte'>O</option> <option value='Decoloración del Esmalte'>D</option><option value='Fluorosis'>Fluorosis</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-restauracion-definitiva"==n){t="<select class='select-tipo select-restauracion-definitiva' name='hallazgo-restauracion-definitiva'><option value=''>Elegir</option><option value='Amalgama Dental'>AD</option> <option value='Resina' >R</option> <option value='Ionónedo de vidrio'>IV</option><option value='Incrustación Estética'>IE</option><option value='Canilla Estética'>C</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-poosicion-dentaria"==n){t="<select class='select-tipo select-restauracion-definitiva' name='hallazgo-poosicion-dentaria'><option value=''>Elegir</option><option value='Mesializado'>M</option> <option value='Distalizado'>D</option> <option value='Vestibularizado'>V</option><option value='Palatinizado'>P</option><option value='Lingualizado'>L</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-fosas-fisuras-profundas"==n){t="<select class='select-tipo select-fosas-fisuras-profundas' name='hallazgo-fosas-fisuras-profundas'><option value=''>Elegir</option><option value='Fosas y fisuras profundas'>FFP</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-piesa-dentaria-ectopica"==n){t="<select class='select-tipo select-dentaria-ectopica' name='hallazgo-piesa-dentaria-ectopica'><option value=''>Elegir</option><option value='Pieza Ectópica'>E</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-macrodoncia"==n){t="<select class='select-tipo select-hallazgo-macrodoncia' name='hallazgo-macrodoncia'><option value=''>Elegir</option><option value='Macrodoncia'>MAC</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-microdoncia"==n){t="<select class='select-tipo select-hallazgo-microdoncias' name='hallazgo-microdoncias'><option value=''>Elegir</option><option value='Macrodoncia'>MIC</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-remanente-radicular"==n){t="<select class='select-tipo select-remanente' name='hallazgo-remanente'><option value=''>Elegir</option><option value='Macrodoncia'>RR</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-movilidad-patologica"==n){t="<select class='select-tipo select-remanente' name='hallazgo-remanente'><option value=''>Elegir</option><option value='Mobilidad patológica'>M</option></select>";$(this).find(".select-hallazgos").append(t)}$(this).find(".select-tipo").addClass("show");var e=$(this).find(".select-tipo");$(e).each(function(a){$(this).attr("name")==n&&$(this).addClass("show")})}}),$(s).hasClass("hallazgo-poosicion-dentaria")&&$(this).parents("svg").toggleClass("active-dentaria"),$(".select-tipo").change(function(){var i=$(this).children("option:selected").text(),s=$(this).children("option:selected").val(),a=$(this).attr("name");"Elegir"!==i&&$(this).parent().append("<span  class="+a+">"+i+"</span> ");var n=$(this).parents(".box").attr("data-pieza"),l=$(this).parents(".box").attr("id"),p=$(this).parents(".contenido-odontograma").attr("data-texto");console.log(p);var t=$(this).parents(".box-options").siblings().find(".svg");$(t).each(function(a){var t=this.id;if(l==t){var e=$(this).find(".active-last").attr("data-pos"),o=$(this).find(".active-last").attr("data-sigla");"Posicion Dentaria"==p||"Fosas y Fisuras Profundas"==p||"Pieza dentaria ectopica"==p||"Pieza dentaria ectopica"==p||"Macrodoncia"==p||"Microdoncia"==p||"Remante radicular"==p||"Movilidad patologica"==p?$(".lista-hallazgo-detallado").append("<li id="+l+" data-pos="+e+" data-sigla="+i+' ><span class="nombre-hallazo"> '+p+"</span> - "+s+" <span>"+i+" </span>, de la  pieza dental <span> "+n+'</span> <a href="#">Eliminar</a>  </li> '):$(".lista-hallazgo-detallado").append("<li id="+l+" data-pos="+e+" data-sigla="+i+' ><span class="nombre-hallazo"> '+p+"</span> - "+s+" <span>"+i+" </span>,  en la cara "+e+" <span>  "+o+" </span>, de la  pieza dental <span> "+n+'</span> <a href="#">Eliminar</a>  </li> '),n in dientes?p in dientes[n]&&(dientes[n][p][e]=!0):(dientes[n]={},p in dientes[n]||(dientes[n][p]={},dientes[n][p][e]=!0)),document.getElementById("id_odontograma_especificaciones").innerHTML=JSON.stringify(dientes)}}),$(this).remove()}),$(s).hasClass("hallazgo-restauracion-temporal")){o=$(this).parents().attr("data-pieza"),n=$(this).parents(".contenido-odontograma").attr("data-texto");console.log("a2: "+o),console.log("b: "+t),console.log("c: "+e),console.log("c: "+t),console.log("d:"+n),$(".lista-hallazgo-detallado").append("<li id="+o+" data-pos="+t+" data-sigla="+e+' ><span class="nombre-hallazo"> '+n+"</span>  En la cara "+t+" <span>  "+e+" </span>, de la  pieza dental <span> "+o+'</span> <a href="#">Eliminar</a>  </li>')}})},eventJson:function(){JSON.parse('{ "nombre": "caries","pieza": "1.1" , "cara": "mesial",  "tipo" : "mancha blanca"}')},activarHallazgo:function(){$(".lista-hallazgos li a").on("click",function(a){a.preventDefault(),a.stopPropagation(),nombreHallazgo=$(this).attr("id"),textoHallazgo=$(this).attr("data-texto"),$(".lista-hallazgos li a").removeClass("active"),$(this).addClass("active");var t=$(this).parents(".page-odontograma").find(".contenido-odontograma");t.attr("data-texto",textoHallazgo),t.attr("data-name",nombreHallazgo),t.removeClass(),t.addClass("contenido-odontograma"),t.addClass(nombreHallazgo)}),$(".cont-diente.diente-restaura .diente").on("click",function(a){$(this).toggleClass("active-restaura");$(this).attr("data-pos"),$(this).attr("data-sigla")}),$("#hallazgo-caries").click()},eliminarHallazgos:function(){$(document).on("click",".lista-hallazgo-detallado li a",function(a){a.preventDefault(),a.stopPropagation();var e=$(this).parents("li").attr("id"),o=$(this).parents("li").attr("data-pos"),i=$(this).parents("li").attr("data-sigla"),t=$(this).parents(".page-odontograma").find(".svg");$(t).each(function(a){if(this.id==e){var t=$(this).find(".diente");$(t).each(function(a){var t=$(this).attr("data-pos");$(this).attr("data-sigla");o==t&&$(this).removeClass("active")})}});var s=$(this).parents(".page-odontograma").find(".box");$(s).each(function(a){if(this.id==e){var t=$(this).find(".select-hallazgos").find("span");$(t).each(function(a){$(this).text()==i&&$(this).remove()})}}),$(this).parents("li").remove();$("#id_odontograma_especificaciones").val()})}};$(function(){$(".page-odontograma").length&&(MyApp.eventoDientes(),MyApp.eventJson(),MyApp.activarHallazgo(),MyApp.eliminarHallazgos())});