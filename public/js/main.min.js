var dataOdontograma={caries:[],restauracion:[]},dientes={},MyApp={eventoDientes:function(){$(".cont-diente .diente").on("click",function(a){var t=$(this).parents(".contenido-odontograma"),o=t.attr("data-name"),i=t.attr("data-tipo");console.log("nombre hallazgo: "+o),console.log("tipo hallazgo: "+i),$(this).toggleClass("active"),$(this).toggleClass(o),$(".cont-diente .diente").removeClass("active-last"),$(this).addClass("active-last");var e=$(this).attr("data-pos"),s=$(this).attr("data-sigla"),l=$(this).parents("svg").attr("id"),n=$(this).parents(".box-lista-dientes").siblings().find(".box");if($(this).parents("svg").hasClass("pre-seleccionado")&&console.log("se agrega pre-seleccionado"),$(this).parents("svg").addClass("pre-seleccionado"),$(".select-tipo").remove(),$(n).each(function(a){if(this.id==l){if("hallazgo-caries"==o){var t="<select class='select-tipo select-caries' name='hallazgo-caries'><option value=''>Elegir</option><option value='Mancha Blanca'>MB</option> <option value='Caries del esmalte'>CE</option> <option value='Caries de la dentina'>CD</option> <option value='Caries de la pulpa'>CDP</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-defectos-del-esmalte"==o){t="<select class='select-tipo select-defectos-esmalte' name='hallazgo-defectos-del-esmalte'><option value=''>Elegir</option><option value='Hipoplasia'>HP</option> <option value='Hipo Mineralización' >HM</option> <option value='Opacidades de Esmalte'>O</option> <option value='Decoloración del Esmalte'>D</option><option value='Fluorosis'>Fluorosis</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-restauracion-definitiva"==o){t="<select class='select-tipo select-restauracion-definitiva' name='hallazgo-restauracion-definitiva'><option value=''>Elegir</option><option value='Amalgama Dental'>AD</option> <option value='Resina' >R</option> <option value='Ionónedo de vidrio'>IV</option><option value='Incrustación Estética'>IE</option><option value='Canilla Estética'>C</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-restauracion-definitiva-malo"==o){t="<select class='select-tipo select-restauracion-definitiva' name='hallazgo-restauracion-definitiva-malo'><option value=''>Elegir</option><option value='Amalgama Dental'>AD</option> <option value='Resina' >R</option> <option value='Ionónedo de vidrio'>IV</option><option value='Incrustación Estética'>IE</option><option value='Canilla Estética'>C</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-posicion-dentaria"==o){t="<select class='select-tipo select-restauracion-definitiva' name='hallazgo-posicion-dentaria'><option value=''>Elegir</option><option value='Mesializado'>M</option> <option value='Distalizado'>D</option> <option value='Vestibularizado'>V</option><option value='Palatinizado'>P</option><option value='Lingualizado'>L</option></select>";$(this).find(".select-hallazgos").append(t)}if("hallazgo-movilidad-patologica"==o){t="<select class='select-tipo select-movilidad-patologica' name='hallazgo-movilidad-patologica'><option value=''>Elegir</option><option value='M1'>M1</option> <option value='M2'>M2</option> <option value='M3'>M3</option> </select>";$(this).find(".select-hallazgos").append(t)}"hallazgo-fosas-fisuras-profundas"==o&&$(this).find(".select-hallazgos").append('<span class="hallazgo-fosas-fisuras-profundas">FFP</span>'),"hallazgo-piesa-dentaria-ectopica"==o&&$(this).find(".select-hallazgos").append('<span class="hallazgo-piesa-dentaria-ectopica">E</span>'),"hallazgo-macrodoncia"==o&&$(this).find(".select-hallazgos").append('<span class="hallazgo-macrodoncia">MAC</span>'),"hallazgo-microdoncia"==o&&$(this).find(".select-hallazgos").append('<span class="hallazgo-microdoncia">MIC<span>'),"hallazgo-impactacion"==o&&$(this).find(".select-hallazgos").append('<span class="hallazgo-impactacion">I</span>'),"hallazgo-remanente-radicular"==o&&$(this).find(".select-hallazgos").append('<span class="hallazgo-remanente-radicular">RR</span>')}}),$(t).is('[data-tipo~="3"]')){l=$(this).parents("svg").attr("id");var p=$(this).parents("svg").attr("data-pieza");o=$(this).parents(".contenido-odontograma").attr("data-texto");$(".lista-hallazgo-detallado").append("<li id="+l+" data-pos="+e+" data-sigla="+s+' ><span class="nombre-hallazo"> '+o+" : </span>  En la cara "+e+" <span>  "+s+" </span>, de la  pieza dental <span> "+p+'</span> <a href="#">Eliminar</a>  </li>')}else if($(t).is('[data-tipo~="5"]')){console.log("aaaa tipo 4");l=$(this).parents("svg").attr("id"),p=$(this).parents("svg").attr("data-pieza");console.log("pieza: "+p);o=$(this).parents(".contenido-odontograma").attr("data-texto");$(".lista-hallazgo-detallado").append("<li id="+l+" data-pos="+e+" data-sigla="+s+' ><span class="nombre-hallazo"> '+o+" </span>: En la  pieza dental <span> "+p+'</span> <a href="#">Eliminar</a>  </li>')}$(".select-tipo").change(function(){var e=$(this).children("option:selected").text(),s=$(this).children("option:selected").val(),a=$(this).attr("name");console.log(e),console.log(s),console.log(a),"Elegir"!==e&&$(this).parent().append("<span  class="+a+">"+e+"</span> ");var l=$(this).parents(".box").attr("data-pieza"),n=$(this).parents(".box").attr("id"),t=$(this).parents(".contenido-odontograma"),p=t.attr("data-texto"),d=t.attr("data-tipo");console.log("select hallazgo: "+p);var o=$(this).parents(".box-options").siblings().find(".svg");$(o).each(function(a){var t=this.id;if(n==t){var o=$(this).find(".active-last").attr("data-pos"),i=$(this).find(".active-last").attr("data-sigla");"4"==d||"5"==d?$(".lista-hallazgo-detallado").append("<li id="+n+" data-pos="+o+" data-sigla="+e+' ><span class="nombre-hallazo"> '+p+"</span> : "+s+" <span>"+e+" </span>, de la  pieza dental <span> "+l+'</span> <a href="#">Eliminar</a>  </li> '):$(".lista-hallazgo-detallado").append("<li id="+n+" data-pos="+o+" data-sigla="+e+' ><span class="nombre-hallazo"> '+p+"</span> : "+s+" <span>"+e+" </span>,  en la cara "+o+" <span>  "+i+" </span>, de la  pieza dental <span> "+l+'</span> <a href="#">Eliminar</a>  </li> '),$(this).addClass("seleccionado"),$(this).removeClass("pre-seleccionado"),l in dientes?p in dientes[l]&&(dientes[l][p][o]=!0):(dientes[l]={},p in dientes[l]||(dientes[l][p]={},dientes[l][p][o]=!0)),$("#id_odontograma_especificaciones").html(JSON.stringify(dientes))}}),$(this).remove()})})},eventJson:function(){JSON.parse('{ "nombre": "caries","pieza": "1.1" , "cara": "mesial",  "tipo" : "mancha blanca"}')},activarHallazgo:function(){$(".lista-hallazgos li a, .estados a").on("click",function(a){a.preventDefault(),a.stopPropagation(),nombreHallazgo=$(this).attr("id"),textoHallazgo=$(this).attr("data-texto"),tipoHallazgo=$(this).attr("data-tipo"),console.log("opciones: "+tipoHallazgo),$(".lista-hallazgos li a").removeClass("active"),$(this).addClass("active");var t=$(this).parents(".page-odontograma").find(".contenido-odontograma");t.attr("data-texto",textoHallazgo),t.attr("data-name",nombreHallazgo),t.attr("data-tipo",tipoHallazgo),t.removeClass(),t.addClass("contenido-odontograma"),t.addClass(nombreHallazgo),"hallazgo-restauracion-definitiva"==nombreHallazgo||"hallazgo-restauracion-definitiva-malo"==nombreHallazgo?$(".restaura-estado").addClass("show"):$(".restaura-estado").removeClass("show"),$("#hallazgo-restauracion-definitiva-malo").toggleClass("actiive")}),$(".estados .bueno").click(function(a){a.preventDefault(),a.stopPropagation(),$("#hallazgo-restauracion-definitiva").trigger("click")}),$(".estados .malo").click(function(a){a.preventDefault(),a.stopPropagation(),console.log("hola malo"),$("#hallazgo-restauracion-definitiva").toggleClass("active")}),$("#hallazgo-caries").click()},eliminarHallazgos:function(){$(document).on("click",".lista-hallazgo-detallado li a",function(a){a.preventDefault(),a.stopPropagation();var o=$(this).parents("li").attr("id"),i=$(this).parents("li").attr("data-pos"),e=$(this).parents("li").attr("data-sigla"),t=$(this).parents(".page-odontograma").find(".svg");$(t).each(function(a){if(this.id==o){var t=$(this).find(".diente");$(t).each(function(a){var t=$(this).attr("data-pos");$(this).attr("data-sigla");i==t&&($(this).removeClass("active"),$(this).parents(".svg").removeClass("active-dentaria"))})}});var s=$(this).parents("li").find(".nombre-hallazo").text().trim(),l=$(this).parents(".page-odontograma").find(".box");$(l).each(function(a){if(this.id==o){var t=$(this).find(".select-hallazgos").find("span");"Remanente radicular"==s||"Impactacion"==s||"Fosas y Fisuras Profundas"==s||"Pieza dentaria ectopica"==s||"Macrodoncia"==s||"Microdoncia"==s?t.remove():$(t).each(function(a){$(this).text()==e&&$(this).remove()})}}),$(this).parents("li").remove()})}};$(function(){$(".page-odontograma").length&&(MyApp.eventoDientes(),MyApp.eventJson(),MyApp.activarHallazgo(),MyApp.eliminarHallazgos())});