/**
 * @file
 * odontrogram.js - components folder
 * 
 *
 * This is used to 
 *
 */

APP.data = {};

APP.data.ondontogram = [
	{
		"id": "Superior Izquierdo",
		"teeth": [{
				"id": 18,
				"isPresent": false,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 17,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 16,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 15,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 14,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 13,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 12,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 11,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			}
		]
	},
	{
		"id": "Superior Derecho",
		"teeth": [{
				"id": 21,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 22,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 23,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 24,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 25,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 26,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 27,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 28,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			}
		]
	},
	{
		"id": "Inferior Izquierdo",
		"teeth": [{
				"id": 48,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 47,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 46,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 45,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 44,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 43,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 42,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 41,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			}
		]
	},
	{
		"id": "Inferior Derecho",
		"teeth": [{
				"id": 31,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 32,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 33,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 34,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 35,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 36,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 37,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			},
			{
				"id": 38,
				"isPresent": true,
				"top": 0,
				"bottom": 0,
				"center": 0,
				"left": 0,
				"right": 0
			}
		]
	}
];

APP.data.references = [
	{
		"id": 2,
		"name" : "Extracción Indicada"		
	},
	{
		"id": 3,
		"name": "Lesión Caries"
	},
	{
		"id": 4,
		"name": "Zona Fistula"
	},
	{
		"id": 5,
		"name": "Sellante"
	},
	{
		"id": 6,
		"name": "Surco Profundo"
	},
	{
		"id": 7,
		"name": "Hipocalcificación"
	},
	{
		"id": 8,
		"name": "Diente Perdido"
	},
	{
		"id": 9,
		"name": "Obturación"
	},
	{
		"id": 10,
		"name": "Fractura"
	},
	{
		"id": 11,
		"name": "Endodoncia"
	},
	{
		"id": 12,
		"name": "Hipoplasia"
	},
	{
		"id": 13,
		"name": "Fluorosis"
	},
	{
		"id": 14,
		"name": "Lesión Activa"
	},
	{
		"id": 15,
		"name": "Lesión Detenida"
	},
	{
		"id": 16,
		"name": "Traumatismo Dento Alveolar"
	}

];

APP.odontogram = (function(){
  var init = function(context){
	  $('.odontogram', context)
		.each(function(i, section){
			new Odontogram( $(section) );
		});
  };

  return {
	  init: init
  };
})();

function Odontogram($el){
	this.$el = $el;
	this.$modal = $('#editOdontogramModal');
	this.renderOdontogram();
	return this;
}

Odontogram.prototype.renderOdontogram = function(){
	var THIS = this;

	new Vue({
		  el: THIS.$el[0],
		  data: {
			odontogram: APP.data.ondontogram
		  },
		  methods:{
			setStateTooth: function(elm){
				var $elm = $(elm.currentTarget),
					modalData = {},
					toothID = $elm.parents('.quadrant__tooth').data().id,
					quadrantID = $elm.parents('.quadrant').data().quadrant;

				var index = _.findIndex(APP.data.ondontogram[quadrantID].teeth, function(elm) { return elm.id == toothID; });
					modalData = APP.data.ondontogram[quadrantID].teeth[index];

				THIS.$modal.modal('show');
				console.log(modalData);

				new Vue({
					el: THIS.$modal[0],
					data: {
						modalData: modalData,
						references: APP.data.references,
						top: '',
						bottom: '',
						left: '',
						right: '',
						center: ''
					},
					methods:{
						
					}
				});
			}
		}
	});

	return this;
};